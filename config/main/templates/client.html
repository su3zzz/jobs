<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electric Works</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

        <style>
            .modal {
                display: none;
            }
            .modal.active {
                display: flex;
            }
        </style>

</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-2 flex items-center justify-between">
            <div class="flex items-center">
                {% comment %} <img src="{% static 'images/upwork-logo.png' %}" alt="Upwork Logo" class="h-8"> {% endcomment %}
                <h1 class="text-lg font-bold">Electric Works</h1>
                <nav class="ml-6 space-x-4">
                    <a href="/client" class="text-gray-700 hover:text-green-500">Jobs </a>
                    <a href="/talents" class="text-gray-700 hover:text-green-500">Talents </a>
                    <a href="/messages" class="text-gray-700 hover:text-green-500">Messages</a>
                    
                </nav>
            </div>
            <div class="flex items-center space-x-4">
                <input type="text" placeholder="Search" class="border border-gray-300 rounded-md py-1 px-2">
                <a href="#" class="text-gray-700 hover:text-green-500"><i class="fas fa-bell"></i></a>
                <a href="#" class="text-gray-700 hover:text-green-500"><i class="fas fa-user"></i> </a>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex">
        <!-- Left Sidebar -->
        <div class="container mx-auto p-4">
            <!-- Navigation -->
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-semibold">All job posts</h1>
                <button id="postnew" class="bg-green-500 text-white py-2 px-4 rounded-md">Post a new job</button>
            </div>
        
            <!-- Search Bar and Filters -->
            <div class="flex items-center mb-4">
                <input type="text" placeholder="Search job postings" class="flex-1 p-2 border border-gray-300 rounded-md">

            </div>
        
            <!-- Job Posts List -->
            <div class="bg-white p-4 rounded-lg shadow-md border-b border-gray-300">
                <div class="mb-2">
                    <a href="#" onclick="showJobDetails(event, 'Fix/Install Lights', 'Fix/Install Lights', 'Fixed-price - Est. Budget: $30','map1.png','loc1.jpg')">
                    <h2 class="text-lg font-semibold">Fix/Install Lights</h2>
                    <a>
                    <p class="text-sm text-gray-500">grabbed by: David O.</p>
                </div>
                <div class="text-gray-500 text-sm">
                    <p>Posted -  Jul 25, 2024</p>
                </div>
                <div class="mt-4 flex justify-between items-center">
                 
                    <button id="showApplicantsButton" class="bg-green-500 text-white py-1 px-3 rounded-md">Grabbed</button>
                </div>
        
            </div>
            <div class="bg-white p-4 rounded-lg shadow-md border-b border-gray-300 mb-2">
                <div class="mb-2">
                    <h2 class="text-lg font-semibold">Electrician</h2>
                    <p class="text-sm text-gray-500">Created 2 days ago</p>
                </div>
                <div class="text-gray-500 text-sm">
                    <p>Draft - Saved Jul 28, 2024</p>
                </div>
                <div class="mt-4 flex justify-between items-center">
                    <button id="edit" class="bg-green-500 text-white py-1 px-3 rounded-md">Edit Job</button>
                </div>
            </div>
        
            <!-- Pagination -->
            <div class="mt-4 flex justify-between items-center text-sm text-gray-500">
                <span>1 - 2 of 2 Job posts</span>
                <div>
                    <button class="text-gray-500 mr-2">&lt; Previous</button>
                    <button class="text-gray-500">Next &gt;</button>
                </div>
            </div>
        </div>
    </main>


    <div id="applicants-details-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-end hidden">
        <div class="bg-white p-6 rounded-l-lg shadow-lg w-full md:w-1/2 h-full overflow-y-auto">
            <h3 id="job-title" class="text-2xl font-semibold mb-4">Fix/Install Lights</h3>
   
            <p id="job-budget" class="text-sm text-gray-500 mb-4">Budget: $15</p>
            
            <div class="mb-4">
                <h4 class="text-xl font-semibold mb-2">Grabbed by:</h4>
                <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6">
                    <div class="flex items-center space-x-6 mb-4">
                        <img class="w-24 h-24 rounded-full" src="{% static 'app3.png' %}" alt="Profile Picture">
                        <div>
                            <h2 class="text-2xl font-semibold">David Oliver </h2>
                            <p class="text-gray-600"> Calgary, Canada</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mb-6">
            
          
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2">Electrical Design & Installation</h3>
                        <p class="mb-2">My services include electrical installations for new construction and renovations, security lights, and routine electrical issues as they arise. I'll get to know your design, pull the necessary permits, and keep the project on track.</p>
              
              
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2">Maintenance, Installation, & Upgrades</h3>
                        <p class="mb-2">I can rewire your home or business, whether it’s a simple fix or a comprehensive overhaul. I also provide routine support for issues like outlet installations and bulb replacement for hard-to-reach fixtures, and we can help save you money by identifying steps you can take to be more energy efficient.</p>
              
              
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2">Construction & Renovation</h3>
                        <p class="mb-2">I use best practices to ensure your electrical system is up to code, ensuring your home or business runs as safely and efficiently as possible. I also work seamlessly with other subcontractors to get the job done.</p>
              
              
                    </div>
                    <div class="mb-6">
                        <h3 class="text-xl font-semibold mb-2">Security Lighting</h3>
                        <p class="mb-2">Can help you create a comprehensive plan for installing security lights in key locations within and around your home or business — including parking lots and other exterior spaces. I also install emergency backup lighting.</p>
              
              
                    </div>
                   
            
                    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-2xl font-semibold mb-6">David's Recent Work History </h2>
                    <div class="mb-4">
                        <h3 class="text-xl font-semibold text-green-700">Fix Lights</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-500">★★★<span class="text-gray-300">★★</span></span>
                            <span class="ml-2 text-gray-600">3</span>
                        </div>
                        <p class="mb-2"><strong> Mst Mursida A.:</strong>  did a fantastic job! His  knowledge is outstanding.</p>
                        <p class="text-gray-500">Jul 2024 - Jul 2024 • Fixed-price</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-xl font-semibold text-green-700">Electrian Expert</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-500">★★★★<span class="text-gray-300">★</span></span>
                            <span class="ml-2 text-gray-600">4</span>
                        </div>
                        <p class="mb-2"><strong>Navid Anjum S.:</strong> knows his stuff when it comes to automation and Pipedrive. Pleased with the delivery!</p>
                        <p class="text-gray-500">Jul 2024 - Jul 2024 • Fixed-price</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-xl font-semibold text-green-700">Install Solar Panel</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-500">★★★★<span class="text-gray-300">★</span></span>
                            <span class="ml-2 text-gray-600">4</span>
                        </div>
                        <p class="mb-2"><strong> Mst K.:</strong>  did a great job from start to finish. He was communicative, responded well to feedback, was patient & delivered what was needed with the right touch.</p>
                        <p class="text-gray-500">Jul 2024 - Jul 2024 • Fixed-price</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-xl font-semibold text-green-700">Fix switch</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-500">★★★★★</span>
                            <span class="ml-2 text-gray-600">5</span>
                        </div>
                        <p class="mb-2"><strong>Jabed M.:</strong>  Jabed exceeded our expectations with high-quality work. Jabed was prompt, and professional.I look forward to working with him again.</p>
                        <p class="text-gray-500">Jul 2024 - Jul 2024 • Fixed-price $10.00</p>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-xl font-semibold text-green-700">Electrician</h3>
                        <div class="flex items-center mb-2">
                            <span class="text-yellow-500">★★★★<span class="text-gray-300">★</span></span>
                            <span class="ml-2 text-gray-600">4</span>
                        </div>
                        <p class="mb-2"><strong> David P.: </strong>Very responsible worker. Thanks for the opportunity!</p>
                        <p class="text-gray-500">Jul 2024 - Jul 2024 • Fixed-price $30.00</p>
                    </div>
                    <a href="#" class="text-green-700">View more (45)</a>
                    </div>
                </div>
                <!-- Repeat the above div block for other applicants -->
            </div>
            <button onclick="messageJob()" class="bg-blue-500 text-white font-medium py-2 px-4 rounded-md ml-2">Message</button>
            <button onclick="jobFinish()" class="bg-green-500 text-white font-medium py-2 px-4 rounded-md ml-2">Job Finished</button>
            <button onclick="closeDetails()" class="bg-red-500 text-white font-medium py-2 px-4 rounded-md ml-2">Cancel Job</button>
 
        </div>
    </div>
    

    <div id="job-details-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-end hidden">
        <div class="bg-white p-6 rounded-l-lg shadow-lg w-full md:w-1/2 h-full overflow-y-auto">
            <h3 id="job-title" class="text-2xl font-semibold mb-4"></h3>
            <p id="job-description" class="mb-4"></p>
           
            <p>
                <strong>Overview:</strong><br>
                Lorem ipsum odor amet, consectetuer adipiscing elit. Cursus accumsa.
                tempus imperdiet sollicitudin consequat diam tincidunt ultricies
                <br><br>
                <img id="job-location"  class="w-full h-auto mb-4 max-w-xs max-h-64" alt="Job Location">
                
     
            </p>
   
            <p id="job-budget" class="text-sm text-red-500 mb-4"><strong>$Fixed-price - Est. Budget: $30<strong></p>
         
            <strong>Location:</strong><br>
            Fox Valley
            <img id="job-location-map"  class="w-full h-auto mb-4" alt="Job Location Map">
          
            <button onclick="closeJobDetails()" class="bg-red-500 text-white font-medium py-2 px-4 rounded-md ml-2">Close</button>
        </div>
    </div>

    <div id="postJobModal" class="modal fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-lg w-full md:w-3/4 lg:w-1/2 h-auto max-h-screen overflow-y-auto">
            <h2 class="text-2xl font-semibold mb-4">Post a New Job</h2>
            <form id="postJobForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="jobTitle">Job Title</label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="jobTitle" type="text" placeholder="Enter job title">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="jobDescription">Job Description</label>
                    <textarea class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="jobDescription" placeholder="Enter job description" rows="5"></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="jobBudget">Budget</label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="jobBudget" type="text" placeholder="Enter job budget">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="jobLocation">Location</label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="jobLocation" type="text" placeholder="Enter location">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="jobImage">Image</label>
                    <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="jobImage" type="file" accept="image/*">
                </div>
                <div class="flex items-center justify-between">
                    <button class="bg-green-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" onclick="postJob()">Post Job</button>
                    <button class="bg-red-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" onclick="closePostJobModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div id="ratingModal" class="fixed inset-0 bg-gray-800 bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full">
            <h3 class="text-2xl mb-4">Rate this worker</h3>
            <div class="flex items-center mb-4">
                <div id="stars" class="flex">
                    <button class="text-gray-300 text-3xl" onclick="setRating(1)">★</button>
                    <button class="text-gray-300 text-3xl" onclick="setRating(2)">★</button>
                    <button class="text-gray-300 text-3xl" onclick="setRating(3)">★</button>
                    <button class="text-gray-300 text-3xl" onclick="setRating(4)">★</button>
                    <button class="text-gray-300 text-3xl" onclick="setRating(5)">★</button>
                </div>
                <span id="ratingValue" class="ml-2 text-gray-600">0</span>
            </div>
            <textarea id="ratingDescription" class="w-full p-2 border border-gray-300 rounded-md mb-4" rows="4" placeholder="Describe your experience"></textarea>
            <div class="flex justify-end">
                {% comment %} <button onclick="closeModal()" class="bg-red-500 text-white font-medium py-2 px-4 rounded-md mr-2">Cancel</button> {% endcomment %}
                <button onclick="closeModal()" class="bg-gray-500 text-white font-medium py-2 px-4 rounded-md mr-2">Skip</button>
                <button onclick="submitRating()" class="bg-green-500 text-white font-medium py-2 px-4 rounded-md">Submit</button>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    document.getElementById('showApplicantsButton').addEventListener('click', function() {
        document.getElementById('applicants-details-modal').classList.remove('hidden');
    });

    function closeDetails() {
        document.getElementById('applicants-details-modal').classList.add('hidden');
    }
</script>

<script>
    function toggleDropdown(id) {
        const dropdown = document.getElementById(id);
        dropdown.classList.toggle('hidden');
    }
</script>
<script>
    let rating = 0;

        function jobFinish() {
            document.getElementById('ratingModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('ratingModal').classList.add('hidden');
        }

        function setRating(value) {
            rating = value;
            const stars = document.getElementById('stars').children;
            for (let i = 0; i < stars.length; i++) {
                if (i < value) {
                    stars[i].classList.add('text-yellow-500');
                    stars[i].classList.remove('text-gray-300');
                } else {
                    stars[i].classList.add('text-gray-300');
                    stars[i].classList.remove('text-yellow-500');
                }
            }
            document.getElementById('ratingValue').innerText = value;
        }

        function submitRating() {
            const description = document.getElementById('ratingDescription').value;
            console.log('Rating submitted:', rating, description);
            closeModal();
        }
    function showJobDetails(event, title, description, budget,map,job) {
        event.preventDefault();
        document.getElementById('job-title').innerText = title;
        document.getElementById('job-description').innerText = description;
        document.getElementById('job-budget').innerText = budget;
        document.getElementById('job-details-modal').classList.remove('hidden');
        document.getElementById('job-location-map').src = mapBaseUrl + map;
        document.getElementById('job-location').src = mapBaseUrl + job;
    }

    function closeJobDetails() {
        document.getElementById('job-details-modal').classList.add('hidden');
    }

    function applyForJob() {
        alert('Applying for the job!');
        closeJobDetails();
    }
    function messageJob(){
        const url = new URL(window.location.href);
        url.pathname = '/messages';
      
      

        window.location.href = url.href;

    }


</script>

<script>
    const postNewButton = document.getElementById('postnew');
    const edit = document.getElementById('edit');
    const postJobModal = document.getElementById('postJobModal');

    postNewButton.addEventListener('click', () => {
        postJobModal.style.display = 'flex';
    });

    edit.addEventListener('click', () => {
        postJobModal.style.display = 'flex';
    });
    function closePostJobModal() {
        postJobModal.style.display = 'none';
    }

    function postJob() {
        // Implement the logic to post a job here
        // For now, just close the modal
        closePostJobModal();
    }

    // Hide the modal initially
    document.addEventListener('DOMContentLoaded', () => {
        postJobModal.style.display = 'none';
    });

    const mapBaseUrl = '{% static "" %}';
</script>
